<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - CertiGo</title>
    <link rel="stylesheet" href="style.css">
    <script src="auth.js"></script>
    <script>
        // Require admin access for this page
        window.addEventListener('DOMContentLoaded', () => {
            requireAdmin();
        });
    </script>
    <style>
        .admin-dashboard {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .admin-header h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .admin-header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-card h3 {
            color: #666;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .stat-card .stat-number {
            font-size: 36px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .stat-card .stat-label {
            font-size: 13px;
            color: #999;
        }

        .stat-card.purple {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .stat-card.purple h3,
        .stat-card.purple .stat-number,
        .stat-card.purple .stat-label {
            color: white;
        }

        .stat-card.green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .stat-card.green h3,
        .stat-card.green .stat-number,
        .stat-card.green .stat-label {
            color: white;
        }

        .stat-card.orange {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .stat-card.orange h3,
        .stat-card.orange .stat-number,
        .stat-card.orange .stat-label {
            color: white;
        }

        .stat-card.blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .stat-card.blue h3,
        .stat-card.blue .stat-number,
        .stat-card.blue .stat-label {
            color: white;
        }

        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .action-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .action-card:hover {
            transform: translateY(-5px);
        }

        .action-card .icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .action-card h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 10px;
        }

        .action-card p {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .action-card button {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-card button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(17, 153, 142, 0.4);
        }

        .recent-activity {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .recent-activity h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }

        .activity-list {
            list-style: none;
        }

        .activity-item {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            font-size: 24px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-content .title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .activity-content .time {
            font-size: 12px;
            color: #999;
        }

        @media (max-width: 768px) {
            .admin-header h1 {
                font-size: 28px;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .admin-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    <div class="logo">
        <img src="C:\Users\LENOVO\Desktop\logo\36986b76-9c45-4c51-8486-c25524aba893.png" alt="CertiGo Logo">
        <h2>CertiGo</h2>
    </div>
    <nav>
        <a href="admin-index.html">Admin Dashboard</a>
<!--        <a href="get-all-certificates.html">Certificates</a>-->
<!--        <a href="get-all-companies.html">Companies</a>-->
<!--        <a href="get-all-courses.html">Courses</a>-->
<!--        <a href="get-all-users.html">Users</a>-->
<!--        <a href="get-all-reviews.html">Reviews</a>-->
<!--        <a href="get-all-lessons.html">Lessons</a>-->
<!--        <a href="get-all-quizzes.html">Quizzes</a>-->
<!--        <a href="get-all-quiz-results.html">Quiz Results</a>-->
<!--        <a href="get-all-user-answers.html">User Answers</a>-->
<!--        <a href="get-all-questions.html">Questions</a>-->
<!--        <a href="get-all-options.html">Options</a>-->
<!--        <a href="get-all-payments.html">Payments</a>-->
<!--        <a href="get-all-enrollments.html">Enrollments</a>-->
<!--        <a href="get-all-instructors.html">Instructors</a>-->
<!--        <a href="add-certificate.html">Add Certificate</a>-->
<!--        <a href="trainee-dashboard.html">User View</a>-->
    </nav>
    <div class="dropdown">
        <button class="dropbtn" id="accountBtn">Account</button>
        <div class="dropdown-content" id="accountDropdown">
            <a href="#" onclick="showUserProfile(); return false;">Profile</a>
            <a href="#" onclick="logout(); return false;">Logout</a>
        </div>
    </div>
</div>

<div class="admin-dashboard">
    <!-- Admin Header -->
    <div class="admin-header">
        <h1>üë®‚Äçüíº Admin Dashboard</h1>
        <p>Welcome back, <span id="adminName">Administrator</span>! Manage your platform from here.</p>
    </div>

    <!-- Dashboard Statistics -->
    <div class="dashboard-stats">
        <div class="stat-card purple">
            <h3>Total Users</h3>
            <div class="stat-number" id="totalUsers">0</div>
            <div class="stat-label">Registered users</div>
        </div>

        <div class="stat-card green">
            <h3>Total Certificates</h3>
            <div class="stat-number" id="totalCertificates">0</div>
            <div class="stat-label">Issued certificates</div>
        </div>

        <div class="stat-card orange">
            <h3>Active Courses</h3>
            <div class="stat-number" id="activeCourses">0</div>
            <div class="stat-label">Available courses</div>
        </div>

        <div class="stat-card blue">
            <h3>Pending Reviews</h3>
            <div class="stat-number" id="pendingReviews">0</div>
            <div class="stat-label">Awaiting approval</div>
        </div>
    </div>

    <!-- Admin Actions -->
    <div class="admin-actions">
        <div class="action-card">
            <div class="icon">üèÜ</div>
            <h3>Manage Certificates</h3>
            <p>View, add, edit, or delete certificates</p>
            <button onclick="window.location.href='get-all-certificates.html'">Go to Certificates</button>
        </div>

<!--        <div class="action-card">-->
<!--            <div class="icon">üë•</div>-->
<!--            <h3>Manage Users</h3>-->
<!--            <p>View and manage user accounts</p>-->
<!--            <button onclick="manageUsers()">View Users</button>-->
<!--        </div>-->

        <div class="action-card">
            <div class="icon">üìö</div>
            <h3>Manage Courses</h3>
            <p>Add or edit training courses</p>
            <button onclick="window.location.href='get-all-courses.html'">View Courses</button>
        </div>

        <div class="action-card">
            <div class="icon">üè¢</div>
            <h3>Manage Companies</h3>
            <p>View and manage company partners</p>
            <button onclick="window.location.href='get-all-companies.html'">View Companies</button>
        </div>

        <div class="action-card">
            <div class="icon">üìù</div>
            <h3>Manage Enrollments</h3>
            <p>Track student enrollments</p>
            <button onclick="window.location.href='get-all-enrollments.html'">View Enrollments</button>
        </div>

        <div class="action-card">
            <div class="icon">üë®‚Äçüè´</div>
            <h3>Manage Instructors</h3>
            <p>View and manage instructors</p>
            <button onclick="window.location.href='get-all-instructors.html'">View Instructors</button>
        </div>

        <div class="action-card">
            <div class="icon">üìñ</div>
            <h3>Manage Lessons</h3>
            <p>View and manage course lessons</p>
            <button onclick="window.location.href='get-all-lessons.html'">View Lessons</button>
        </div>

        <div class="action-card">
            <div class="icon">üìù</div>
            <h3>Manage Options</h3>
            <p>View and manage quiz options</p>
            <button onclick="window.location.href='get-all-options.html'">View Options</button>
        </div>

        <div class="action-card">
            <div class="icon">üí≥</div>
            <h3>Manage Payments</h3>
            <p>View and manage payment transactions</p>
            <button onclick="window.location.href='get-all-payments.html'">View Payments</button>
        </div>

        <div class="action-card">
            <div class="icon">‚ùì</div>
            <h3>Manage Questions</h3>
            <p>View and manage quiz questions</p>
            <button onclick="window.location.href='get-all-questions.html'">View Questions</button>
        </div>

        <div class="action-card">
            <div class="icon">üìù</div>
            <h3>Manage Quizzes</h3>
            <p>View and manage quizzes</p>
            <button onclick="window.location.href='get-all-quizzes.html'">View Quizzes</button>
        </div>

        <div class="action-card">
            <div class="icon">üìä</div>
            <h3>Manage Quiz Results</h3>
            <p>View and manage quiz results</p>
            <button onclick="window.location.href='get-all-quiz-results.html'">View Quiz Results</button>
        </div>

        <div class="action-card">
            <div class="icon">‚≠ê</div>
            <h3>Manage Reviews</h3>
            <p>View and manage course reviews</p>
            <button onclick="window.location.href='get-all-reviews.html'">View Reviews</button>
        </div>

        <div class="action-card">
            <div class="icon">‚úçÔ∏è</div>
            <h3>Manage User Answers</h3>
            <p>View and manage user quiz answers</p>
            <button onclick="window.location.href='get-all-user-answers.html'">View User Answers</button>
        </div>

        <div class="action-card">
            <div class="icon">üë•</div>
            <h3>Manage Users</h3>
            <p>View and manage system users</p>
            <button onclick="window.location.href='get-all-users.html'">View Users</button>
        </div>

<!--        <div class="action-card">-->
<!--            <div class="icon">üóëÔ∏è</div>-->
<!--            <h3>Delete User</h3>-->
<!--            <p>Remove users from the system</p>-->
<!--            <button onclick="window.location.href='delete-user.html'">Delete User</button>-->
<!--        </div>-->
    </div>

    <!-- Recent Activity -->
    <div class="recent-activity">
        <h2>üìä Recent Activity</h2>
        <ul class="activity-list" id="activityList">
            <li class="activity-item">
                <div class="activity-icon">üèÜ</div>
                <div class="activity-content">
                    <div class="title">New certificate issued</div>
                    <div class="time">2 hours ago</div>
                </div>
            </li>
            <li class="activity-item">
                <div class="activity-icon">üë§</div>
                <div class="activity-content">
                    <div class="title">New user registered</div>
                    <div class="time">5 hours ago</div>
                </div>
            </li>
            <li class="activity-item">
                <div class="activity-icon">üìö</div>
                <div class="activity-content">
                    <div class="title">Course updated</div>
                    <div class="time">1 day ago</div>
                </div>
            </li>
            <li class="activity-item">
                <div class="activity-icon">‚≠ê</div>
                <div class="activity-content">
                    <div class="title">New review submitted</div>
                    <div class="time">2 days ago</div>
                </div>
            </li>
        </ul>
    </div>
</div>

<script>
    // Load admin dashboard data
    window.addEventListener('DOMContentLoaded', async () => {
        const user = getCurrentUser();
        if (user && user.username) {
            document.getElementById('adminName').textContent = user.username;
        }

        // Load statistics
        await loadDashboardStats();
    });

    async function loadDashboardStats() {
        try {
            // Load users count
            const usersResponse = await fetch('http://localhost:8080/users');
            if (usersResponse.ok) {
                const users = await usersResponse.json();
                document.getElementById('totalUsers').textContent = users.length;
            }

            // Load certificates count
            const certsResponse = await fetch('http://localhost:8080/certificates');
            if (certsResponse.ok) {
                const certificates = await certsResponse.json();
                document.getElementById('totalCertificates').textContent = certificates.length;
            }

            // Load courses count (placeholder - update with actual endpoint)
            document.getElementById('activeCourses').textContent = '12';

            // Load pending reviews (placeholder - update with actual endpoint)
            document.getElementById('pendingReviews').textContent = '5';

        } catch (error) {
            console.error('Error loading dashboard stats:', error);
        }
    }

    function manageUsers() {
        alert('User management page coming soon!');
        // TODO: Redirect to user management page when created
    }

    function manageCourses() {
        alert('Course management page coming soon!');
        // TODO: Redirect to course management page when created
    }
</script>

</body>
</html>
